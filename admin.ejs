<!DOCTYPE html>
<html>
  <head>
    <title> Page Admin </title>


    <% include partials/head_css_import.ejs %>
  </head>
  <body>
    <h2 class="center-align"> Page Admin </h2>

    <h6> Choisissez votre nombre de blocs</p>
    <form action="#">
      <p>
        <input name="group1"  class="with-gap" type="radio" id="2bloc" />
        <label for="2bloc">2</label>
      </p>
      <p>
        <input name="group2" class="with-gap" type="radio" id="4bloc" />
        <label for="4bloc">4</label>
      </p>
    </form>
    <div id="group1-upload">
      <div class="row">
        <div class="col s6">
          <form action="#">
            <div class="file-field input-field">
              <div class="btn">
                <span>File</span>
                <input type="file">
              </div>
              <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
              </div>
            </div>
          </form>
        </div>
        <div class="col s6">
          <form action="#">
            <div class="file-field input-field">
              <div class="btn">
                <span>File</span>
                <input type="file">
              </div>
              <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="group2-upload">
      <div class="row">
        <div class="col s6">
          <form action="#">
            <div class="file-field input-field">
              <div class="btn">
                <span>File</span>
                <input type="file">
              </div>
              <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
              </div>
            </div>
          </form>
        </div>
        <div class="col s6">
          <form action="#">
            <div class="file-field input-field">
              <div class="btn">
                <span>File</span>
                <input type="file">
              </div>
              <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="row">
        <div class="col s6">
          <form action="#">
            <div class="file-field input-field">
              <div class="btn">
                <span>File</span>
                <input type="file">
              </div>
              <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
              </div>
            </div>
          </form>
        </div>
        <div class="col s6">
          <form action="#">
            <div class="file-field input-field">
              <div class="btn">
                <span>File</span>
                <input type="file">
              </div>
              <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="row">
      <form class="col s12" id="formulaire-texte" method="POST" action="/admin">
        <div class="row">
          <div class="input-field col s12">
            <textarea id="texte" name="texte" class="materialize-textarea"></textarea>
            <label for="texte">Textarea</label>
          </div>
          <button class="btn waves-effect waves-light" type="submit">
            <i class="material-icons right">send</i>
            Submit
          </button>
        </div>
      </form>
    </div>

    <% include partials/js_import.ejs %>

    <script>
            $(function() {
                $( "form" ).submit((event) => {
                    event.preventDefault();
                    data = {
                        texte: $("textarea").val()
                    }

                    if (data.texte) {
                        console.log("data sent: " + JSON.stringify(data))
                        $.ajax({
                            url: "http://" + $(location).attr('host') + "/admin",
                            type: 'POST',
                            contentType: 'application/json',
                            data: JSON.stringify(data),
                            success: function(data) {
                                $("textarea").val("")
                                Materialize.toast('Votre demande a été envoyée!', 2000)
                            }
                        })
                    }
                    else {
                        console.log("no text to send.")
                    }
                })
            })
        </script>

        <script>

        $( "input" ).on( "click", function() {
          $( "#group1-upload" ).html( $( "input:checked" ).val());
        });
      </script>

  </body>
</html>
